<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiMi AI Platform</title>
    <meta name="description" content="MiMi AI Platform — Chat and Image Generation powered by DeepSeek R1 and FLUX.1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%230a0a0f'/%3E%3Cpath d='M16 4L26 18L16 28L6 18Z' fill='%237c5cfc'/%3E%3Cpath d='M16 4L26 18H6Z' fill='%239078ff' opacity='0.6'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Status Bar -->
    <header class="status-bar" id="statusBar">
        <div class="status-bar-inner">
            <div class="logo">
                <span class="logo-icon">◆</span>
                <span class="logo-text">MiMi AI</span>
            </div>
            <div class="status-indicators">
                <div class="status-chip" id="llmStatus">
                    <span class="status-dot"></span>
                    <span class="status-label">LLM</span>
                    <span class="status-value">checking…</span>
                </div>
                <div class="status-chip" id="imageStatus">
                    <span class="status-dot"></span>
                    <span class="status-label">Image</span>
                    <span class="status-value">checking…</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
        <button class="tab-btn active" data-tab="chat" id="chatTabBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
            </svg>
            Chat
        </button>
        <button class="tab-btn" data-tab="images" id="imagesTabBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" />
                <circle cx="8.5" cy="8.5" r="1.5" />
                <path d="M21 15l-5-5L5 21" />
            </svg>
            Images
        </button>
        <button class="tab-btn" data-tab="history" id="historyTabBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
            </svg>
            History
        </button>
    </nav>

    <!-- Chat Tab -->
    <main class="tab-content active" id="chatTab">
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <div class="welcome-icon">◆</div>
                    <h2>MiMi AI Chat</h2>
                    <p>Powered by DeepSeek R1 on DarkBase</p>
                </div>
            </div>
            <div class="chat-input-area">
                <div class="chat-controls">
                    <select id="modelSelect" class="model-select">
                        <option value="">Loading models…</option>
                    </select>
                    <button class="btn-icon" id="clearChatBtn" title="Clear chat">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                        </svg>
                    </button>
                </div>
                <div class="input-row">
                    <textarea id="chatInput" class="chat-input" placeholder="Type your message…" rows="1"></textarea>
                    <button class="btn-send" id="sendBtn" title="Send message">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13" />
                            <polygon points="22 2 15 22 11 13 2 9 22 2" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Images Tab -->
    <main class="tab-content" id="imagesTab">
        <div class="images-container">
            <div class="image-gen-panel">
                <h3 class="panel-title">Generate Image</h3>
                <div class="form-group">
                    <label for="imagePrompt">Prompt</label>
                    <textarea id="imagePrompt" class="image-prompt" placeholder="Describe the image you want to create…"
                        rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="imgWidth">Width</label>
                        <input type="number" id="imgWidth" value="1024" min="256" max="2048" step="64"
                            class="num-input">
                    </div>
                    <div class="form-group half">
                        <label for="imgHeight">Height</label>
                        <input type="number" id="imgHeight" value="1024" min="256" max="2048" step="64"
                            class="num-input">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="imgSteps">Steps</label>
                        <input type="number" id="imgSteps" value="20" min="1" max="100" class="num-input">
                    </div>
                    <div class="form-group half">
                        <label for="imgSeed">Seed <span class="hint">(empty = random)</span></label>
                        <input type="number" id="imgSeed" placeholder="Random" class="num-input">
                    </div>
                </div>
                <button class="btn-generate" id="generateBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                    </svg>
                    Generate
                </button>

                <!-- Queue Status -->
                <div class="queue-panel" id="queuePanel" style="display:none;">
                    <h4>Queue</h4>
                    <div id="queueInfo"></div>
                </div>
            </div>

            <div class="image-gallery" id="imageGallery">
                <div class="gallery-empty">
                    <div class="gallery-empty-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1">
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                            <circle cx="8.5" cy="8.5" r="1.5" />
                            <path d="M21 15l-5-5L5 21" />
                        </svg>
                    </div>
                    <p>Generated images will appear here</p>
                </div>
            </div>
        </div>
    </main>

    <!-- History Tab -->
    <main class="tab-content" id="historyTab">
        <div class="history-container">
            <div class="history-header">
                <h3 class="panel-title">Activity History</h3>
                <div class="history-filters">
                    <button class="filter-btn active" data-filter="all" id="filterAll">All</button>
                    <button class="filter-btn" data-filter="chat" id="filterChats">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                        </svg>
                        Chats
                    </button>
                    <button class="filter-btn" data-filter="image" id="filterImages">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                            <circle cx="8.5" cy="8.5" r="1.5" />
                            <path d="M21 15l-5-5L5 21" />
                        </svg>
                        Images
                    </button>
                </div>
            </div>
            <div class="history-timeline" id="historyTimeline">
                <div class="history-empty">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <circle cx="12" cy="12" r="10" />
                        <polyline points="12 6 12 12 16 14" />
                    </svg>
                    <p>No history yet — start chatting or generating images</p>
                </div>
            </div>
            <div class="history-load-more" id="historyLoadMore" style="display:none;">
                <button class="btn-load-more" id="loadMoreBtn">Load more</button>
            </div>
        </div>
    </main>

    <!-- Image Preview Modal -->
    <div class="modal-overlay" id="imageModal" style="display:none;">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <img id="modalImage" src="" alt="Full size preview">
            <div class="modal-meta" id="modalMeta"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>